{% extends 'baseAuthenticated.html.twig' %}

{% block title %}My Company{% endblock %}
{% block bodyClass %}page-company-view{% endblock %}

{% block body %}

    <div class="page-company-view__featured-image uk-height-medium uk-flex uk-flex-right uk-flex-bottom uk-background-cover uk-light"
         data-src="{{ company.featuredImageURL }}" uk-img>

        <div class="uk-width-1-1" style="background: rgba(0,0,0,0.6)">
            <div class="uk-container">
                <div class="uk-padding-small">
                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                        <div class="uk-width-expand">
                            <h3>{{ company.name }}</h3>
                        </div>
                        <div class="uk-width-auto">
                            <div class="uk-align-right">
                                <div class="react-favorite-company uk-inline" data-company-id="{{ company.id }}" data-company-favorited="{{ company.isFavoritedByUser( user ) }}"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="uk-container">

        <div class="uk-grid-small uk-flex-middle uk-margin" uk-grid>
            <div class="uk-width-expand">
                <div class="uk-align-right@l">
                    {% if user.company is not defined and user.company.id != company.id %}
                        <form class="uk-inline" method="post" action="{{ path('company_join', {'id': company.id}) }}">
                            <button type="submit" class="uk-button uk-button-default uk-button-small">Join this Company</button>
                        </form>
                    {% endif %}

                    {% if user.admin or (company.owner and user.id == company.owner.id) %}
                        <a href="{{ path('company_edit', {id: company.id}) }}" class="uk-button uk-button-primary uk-button-small">Edit</a>
                    {% endif %}
                </div>
            </div>
        </div>

        <ul data-uk-tab="{connect: '#tab-company-detail'}" uk-switcher>
            <li class="uk-active"><a href="#company-summary">Summary</a></li>
            {% if company.companyPhotos|length %}
                <li><a href="#company-photos">Photos</a></li>
            {% endif %}
            {% if company.companyVideos|length %}
                <li><a href="#company-videos">Videos</a></li>
            {% endif %}
            {% if company.companyExperiences|length %}
                <li><a href="#company-events">Events</a></li>
            {% endif %}
            {% if company.companyResources|length %}
                <li><a href="#company-events">Resources</a></li>
            {% endif %}
        </ul>

        <div class="uk-switcher" id="tab-company-detail">
            <div class="company__summary">
                <div class="uk-width-xlarge">
                    <div class="uk-margin">
                        {{ company.description|raw }}
                    </div>

                    <div class="company-links uk-margin">
                        {% if company.website %}
                            <a href="{{ company.website }}" target="_blank" class="uk-icon-button uk-margin-small-right" uk-icon="world"></a>
                        {% endif %}
                        {% if company.phone %}
                            <a href="{{ company.phone }}" target="_blank" class="uk-icon-button uk-margin-small-right" uk-icon="receiver"></a>
                        {% endif %}
                        {% if company.emailAddress %}
                            <a href="mailto:{{ company.emailAddress }}" target="_blank" class="uk-icon-button uk-margin-small-right" uk-icon="mail"></a>
                        {% endif %}
                        {% if company.companyLinkedinPage %}
                            <a href="{{ company.companyLinkedinPage }}" target="_blank" class="uk-icon-button uk-margin-small-right" uk-icon="linkedin"></a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% if company.companyPhotos|length %}
                <div class="company__photos">
                    <div class="uk-grid uk-child-width-1-6@l uk-child-width-1-4@m uk-child-width-1-3" uk-grid="masonry: true" uk-lightbox="animation: slide">
                        {% for companyPhoto in company.companyPhotos %}
                            <div>
                                <a class="uk-inline" href="{{ asset(uploaded_asset(companyPhoto.path)) }}">
                                    <img src="{{ asset(uploaded_asset(companyPhoto.path))|imagine_filter('squared_thumbnail_small') }}" />
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if company.companyVideos|length %}
                <div class="company__videos">
                    <div class="uk-child-width-1-3@m" uk-grid="masonry: true" uk-lightbox="animation: slide; video-autoplay: 1">
                        {% for video in company.companyVideos %}
                            <div>
                                <a class="uk-inline" href="https://www.youtube.com/watch?v={{ video.videoId }}">
                                    <img src="http://i.ytimg.com/vi/{{ video.videoId }}/hqdefault.jpg" alt="">
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if company.companyExperiences|length %}
                <div class="company__events">
                    <div class="uk-grid event-listing uk-child-width-1-2@m" uk-grid="masonry: true">
                        {% for experience in company.companyExperiences %}
                            <div>
                                <div class="uk-card uk-card-default uk-card-body">
                                    <div class="uk-card-badge uk-label">{{ experience.type }}</div>
                                    <div class="uk-text-meta">October 4, 2019</div>
                                    <div class="uk-margin">
                                        <a href="#"><h3 class="uk-card-title">Code Hackathon at Best Buy HQ!</h3></a>
                                        <p>Lorem ipsum color sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if company.companyResources|length %}
                <div class="company__resources">
                    <dl class="uk-description-list uk-description-list-divider">
                        {% for companyResource in company.companyResources %}
                            <div class="uk-grid uk-flex-middle" uk-grid>
                                <div class="uk-width-expand">
                                    <dt>{{ companyResource.title }}</dt>
                                    <dd>{{ companyResource.description }}</dd>
                                </div>
                                <div class="uk-width-auto">
                                    <a href="{{ asset(uploaded_asset(companyResource.path)) }}" class="uk-button uk-button-default uk-button-small" target="_blank">View</a>
                                </div>
                            </div>
                        {% endfor %}
                    </dl>
                </div>
            {% endif %}
        </div>
    </div>

{% endblock %}
