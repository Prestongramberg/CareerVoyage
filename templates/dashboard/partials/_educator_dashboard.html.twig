<div class="uk-container">
    <div class="uk-grid" uk-grid>
        <div class="uk-width-2-3@m uk-width-1-1">
            <!-- PROFILE -->
            <div class="profile-card-wrapper">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-header">
                        <div class="uk-grid-small uk-flex-middle" uk-grid>
                            <div class="uk-width-auto">
                                <img class="uk-border-circle" width="40" height="40" src="{{ ( attribute(user, 'photo') is defined and user.photo ) ? asset(uploaded_asset(user.photoPath))|imagine_filter('squared_thumbnail_small') : asset('build/images/avatar.png') }}">
                            </div>
                            <div class="uk-width-expand">
                                <a href="{{ path('profile_index', {'id': user.id}) }}">
                                    <h3 class="uk-card-title uk-margin-remove-bottom">{{ user.getFullName }}</h3>
                                </a>
                                <p class="uk-text-meta uk-margin-remove-top">
                                    {# TODO: Add link to school view #}
                                    <a href="#">{{ user.school.name }}</a> - Educator
                                </p>
                            </div>
                            <div class="uk-width-auto">
                                <div class="uk-align-right">
                                    <a href="{{ path('profile_edit', {'id': user.id}) }}">
                                        <span class="uk-margin-small-right" uk-icon="icon: file-edit; ratio: 1"></span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body">
                        <p>Welcome to Future Forward! <a href="{{ path('profile_edit', {'id': user.id}) }}">Add a brief bio</a> so others know more about you.</p>
                            <div class="professional-links">
                                <a href="mailto:{{ user.email }}" class="uk-icon-button uk-margin-small-right" uk-icon="mail"></a>
                            </div>
                    </div>
                </div>
            </div>

            <div class="uk-margin">
                <ul class="uk-tab" uk-switcher="connect: #tab-user-preferences" uk-tab>
                    <li class="uk-active"><a href="#user-preferences">Calendar</a></li>
                    <li><a href="#user-participation">Participation</a></li>
                    <li><a href="#user-favorites">Favorites</a></li>
                    <li><a href="#user-events">Events</a></li>
                </ul>
                <div class="uk-switcher" id="tab-user-preferences">
                    <div class="user_preferences_calendar">
                        <div class="react-events-calendar" data-user-id="{{ user.id }}"></div>
                    </div>
                    <div class="user_preferences_participation">
                        <div class="uk-card uk-card-default">
                            <div class="uk-card-body">
                                <h3 class="uk-card-title uk-margin-remove-bottom">My Student's Participation</h3>
                                <div class="react-horizontal-bar-chart" data-sets='[{"label": "Student Participation", "data": [4,8,12,6,10,2,0,7]}]' data-labels='["Rick", "Ralph", "Sarah", "Joe", "Brittney", "Josh", "Chelsea", "Alexis"]'></div>
                            </div>
                        </div>
                    </div>
                    <div class="user_preferences_favorites">
                        <div class="uk-card uk-card-default">
                            <div class="uk-card-body">
                                <h3 class="uk-card-title uk-margin-remove-bottom">My Favorites</h3>
                                <ul class="uk-tab" uk-switcher="connect: #tab-favorites" uk-tab>
                                    <li class="uk-active"><a href="#favorites-lessons">Lessons</a></li>
                                    <li><a href="#favorites-companies">Companies</a></li>
                                </ul>
                                <div class="uk-switcher" id="tab-favorites">
                                    <div class="tab-favorites__lessons">
                                        {% if user.lessonFavorites|length > 0 %}
                                            <ul class="uk-list uk-list-divider">
                                                {% for favorite in user.lessonFavorites %}
                                                    <li>
                                                        <a class="uk-link-text" href="{{ path('lesson_view', {'id': favorite.lesson.id}) }}">{{ favorite.lesson.title }}</a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% else %}
                                            <p>No favorite lessons added yet.</p>
                                        {% endif %}
                                    </div>
                                    <div class="tab-favorites__companies">
                                        {% if user.companyFavorites|length > 0 %}
                                            <ul class="uk-list uk-list-divider">
                                                {% for favorite in user.companyFavorites %}
                                                    <li>
                                                        <a class="uk-link-text" href="{{ path('company_view', {'id': favorite.company.id}) }}">{{ favorite.company.name }}</a>
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        {% else %}
                                            <p>No favorite companies added yet.</p>
                                        {% endif %}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="user_preferences_events">
                        <div>
                            <div class="uk-card uk-card-default">
                                <div class="uk-card-body">
                                    <h3 class="uk-card-title uk-margin-remove-bottom">My Events</h3>
                                    <ul class="uk-tab" uk-switcher="connect: #tab-events" uk-tab>
                                        <li class="uk-active"><a href="#events-upcoming">Upcoming</a></li>
                                        <li><a href="#events-completed">Completed</a></li>
                                    </ul>
                                    <div class="uk-switcher" id="tab-events">
                                        <div class="tab-events__upcoming">
                                            Upcoming Events...
                                        </div>
                                        <div class="tab-events__completed">
                                            Completed Events...
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="uk-margin">
                            <div class="uk-card uk-card-default">
                                <div class="uk-card-body">
                                    <h3 class="uk-card-title uk-margin-remove-bottom">My Reviews</h3>
                                    <ul class="uk-tab" uk-switcher="connect: #tab-reviews" uk-tab>
                                        <li class="uk-active"><a href="#reviews-todo">Todo</a></li>
                                        <li><a href="#reviews-submitted">Submitted</a></li>
                                    </ul>
                                    <div class="uk-switcher" id="tab-reviews">
                                        <div class="tab-reviews__todo">
                                            <ul class="uk-list uk-list-divider">
                                                <li>
                                                    <a class="uk-link-text" href="#">3M Site Visit</a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="tab-reviews__submitted">
                                            <ul class="uk-list uk-list-divider">
                                                <li>
                                                    Best Buy Site Visit
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-width-1-3@m uk-width-1-1">
            <!-- Quick Links -->
            <div class="quick-links-wrapper">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-header">
                        <div class="uk-grid-small uk-flex-middle" uk-grid>
                            <div class="uk-width-expand">
                                <h3 class="uk-card-title uk-margin-remove-bottom">Explore</h3>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body">
                        <ul class="uk-list">
                            <li><a href="{{ path('lesson_index') }}">Find a Lesson</a></li>
                            <li><a href="{{ path('professional_index') }}">Search for Professionals</a></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- My Lessons -->
            <div class="quick-links-wrapper uk-margin">
                <div class="uk-card uk-card-default">
                    <div class="uk-card-header">
                        <div class="uk-grid-small uk-flex-middle" uk-grid>
                            <div class="uk-width-expand">
                                <h3 class="uk-card-title uk-margin-remove-bottom">Lessons For My Class</h3>
                            </div>
                        </div>
                    </div>
                    <div class="uk-card-body">
                        {% if user.lessonTeachables|length > 0 %}
                            <ul class="uk-list uk-list-divider">
                                {% for teachable in user.lessonTeachables %}
                                    <li>
                                        <a class="uk-link-text" href="{{ path('lesson_view', {'id': teachable.lesson.id}) }}">{{ teachable.lesson.title }}</a>
                                    </li>
                                {% endfor %}
                            </ul>
                        {% else %}
                            <p>No teachable lessons added yet.</p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
