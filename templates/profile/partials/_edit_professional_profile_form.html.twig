<div class="uk-container js-form" data-route="{{ path('profile_edit', {'id' : user.id}) }}">
    <ul class="uk-tab" uk-switcher="connect: #tab-account" uk-tab>
        <li class="uk-active"><a href="#account-details">Edit Profile</a></li>
        {% include 'profile/partials/shared/_settings_and_delete_tabs.html.twig' %}
    </ul>
    <div class="uk-switcher" id="tab-account">
        <div class="account_details">

            {{ form_start(form, {attr: {'novalidate' : 'novalidate'}}) }}

            {% if form_errors(form) %}
                <div class="uk-alert-danger" uk-alert>
                    <a class="uk-alert-close" uk-close></a>
                    <div>{{ form_errors(form) }}</div>
                </div>
            {% endif %}

            <div uk-grid>
                <div class="uk-width-1-1 uk-width-small@m">
                    <ul id="test" class="uk-tab-left" uk-tab="connect: #tab-account-inner; animation: uk-animation-fade">
                        <li><a href="#account-details-profile">Personal</a></li>
                        <li><a href="#account-details-profile-industries">Profession</a></li>
                        <li><a href="#account-details-profile-roles">Roles</a></li>
                        <li><a href="#account-details-profile-schools" id="account-details-profile-schools">Schools</a></li>
                        <li><a href="#account-details-profile-videos" id="account-details-profile-videos">Videos</a></li>
                        <li><a href="#account-details-profile-account">Account</a></li>
                    </ul>
                </div>
                <div class="uk-width-1-1 uk-width-expand@m">
                    <ul id="tab-account-inner" class="uk-switcher">
                        <div class="account_details_personal">
                            <div class="uk-width-xlarge">
                                <fieldset class="uk-fieldset">

                                    <div class="uk-margin">
                                        {{ form_label(form.firstName, 'First Name*') }}
                                        {{ form_widget(form.firstName, {'attr': {'class': 'uk-input' ~ ( form_errors(form.firstName) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.firstName) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.lastName, 'Last Name*') }}
                                        {{ form_widget(form.lastName, {'attr': {'class': 'uk-input' ~ ( form_errors(form.lastName) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.lastName) }}
                                    </div>
                                    {% include 'profile/partials/shared/_edit_profile_image.html.twig' %}
                                    <div class="uk-margin">
                                        {{ form_label(form.briefBio, 'Brief Bio') }}
                                        <div class="uk-text-meta">Tell us a little about yourself to be featured on our platform</div>
                                        {{ form_widget(form.briefBio, {'attr': {'class': 'uk-textarea uk-height-small' ~ ( form_errors(form.briefBio) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.briefBio) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.interests, 'Interests') }}
                                        {{ form_widget(form.interests, {'attr': {'class': 'uk-input' ~ ( form_errors(form.interests) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.interests) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.street, 'Street*') }}
                                        {{ form_widget(form.street, {'attr': {'class': 'uk-input' ~ ( form_errors(form.street) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.street) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.city, 'City*') }}
                                        {{ form_widget(form.city, {'attr': {'class': 'uk-input' ~ ( form_errors(form.city) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.city) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.state, 'State*') }}
                                        {{ form_widget(form.state, {'attr': {'class': 'uk-input' ~ ( form_errors(form.state) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.state) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.zipcode, 'Zip*') }}
                                        {{ form_widget(form.zipcode, {'attr': {'class': 'uk-input' ~ ( form_errors(form.zipcode) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.zipcode) }}
                                    </div>
                                    <div class="uk-margin">
                                        <button type="button" class="uk-button uk-button-primary uk-button-small js-navigate" data-navigate-to-index="1">Next</button>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="account_details_industries">
                            <div class="uk-width-xlarge">
                                <fieldset class="uk-fieldset">
                                    <div class="uk-margin">
                                        {{ form_label(form.primaryIndustry, 'Career Sector*') }}
                                        {{ form_widget(form.primaryIndustry, {'attr': {'class': 'js-primary-industry uk-select' ~ ( form_errors(form.primaryIndustry) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.primaryIndustry) }}
                                    </div>
                                    <div class="js-secondary-industry-container">
                                        {% if form.secondaryIndustries is defined %}
                                            <div class="uk-margin">
                                                {{ form_label(form.secondaryIndustries, 'Professions*') }}
                                                {{ form_widget(form.secondaryIndustries, {'attr': {'class': 'uk-checkboxes uk-checkboxes-newlines' ~ ( form_errors(form.secondaryIndustries) ? ' uk-form-danger' : '' ) }}) }}
                                                <div class="clear"></div>
                                                {{ form_errors(form.secondaryIndustries) }}
                                            </div>
                                        {% endif %}
                                    </div>
                                    <div class="uk-margin">
                                        <button type="button" class="uk-button uk-button-primary uk-button-small js-navigate" data-navigate-to-index="2">Next</button>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="account_details_roles">
                            <div class="uk-width-xlarge">
                                <fieldset class="uk-fieldset">
                                    <div class="uk-margin">
                                        {{ form_label(form.rolesWillingToFulfill, 'Roles Willing To Fulfill') }}
                                        {{ form_widget(form.rolesWillingToFulfill, {'attr': {'class': 'uk-checkboxes uk-checkboxes-newlines' ~ ( form_errors(form.rolesWillingToFulfill) ? ' uk-form-danger' : '' ) }}) }}
                                        <div class="clear"></div>
                                        {{ form_errors(form.rolesWillingToFulfill) }}
                                    </div>
                                    <div class="uk-margin">
                                        <button type="button" class="uk-button uk-button-primary uk-button-small js-navigate" data-navigate-to-index="3">Next</button>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                        <div class="account_details_schools">

                            <div class="uk-width-xlarge">
                                <fieldset class="uk-fieldset">
                                    <div class="uk-margin">
                                        {{ form_label(form.schools, 'Schools*') }}
                                        <div class="react-schools-select-by-radius"
                                            data-field-name="professional_edit_profile_form[schools][]"
                                            data-field-value="{{ form.schools.vars.value|json_encode }}"
                                            data-georadius-name="professional_edit_profile_form[geoRadius]"
                                            data-georadius-value="{{ form.geoRadius.vars.value }}"
                                            data-geozipcode-name="professional_edit_profile_form[geoZipCode]"
                                            data-geozipcode-value="{% if form.geoZipCode.vars.value %}{{ form.geoZipCode.vars.value }}{% elseif user.zipcode is defined %}{{ user.zipcode }}{% endif %}">
                                            {{ form_widget(form.schools, {'attr': {'class': 'uk-checkboxes uk-checkboxes-newlines' ~ ( form_errors(form.schools) ? ' uk-form-danger' : '' ) }}) }}
                                            {{ form_widget(form.geoZipCode) }}
                                            {{ form_widget(form.geoRadius) }}
                                        </div>
                                        <div class="clear"></div>
                                        {{ form_errors(form.schools) }}
                                    </div>
                                    <div class="uk-margin">
                                        <button type="button" class="uk-button uk-button-primary uk-button-small js-navigate" data-navigate-to-index="4">Next</button>
                                    </div>
                                </fieldset>
                            </div>
                        </div>

                        <div class="account_details_videos">

                            <div class="uk-width-xlarge">
                                <p>Videos can help showcase your knowledge as a professional.  Upload your videos to Youtube and then attach them here.</p>
                            </div>
                            <div class="uk-margin">
                                <div class="uk-text-center uk-placeholder">
                                    <a class="uk-button uk-button-default uk-button-small" href="#modal-add-professional-video" uk-toggle>Add a Video</a>
                                    <div id="modal-add-professional-video" uk-modal>
                                        <div class="uk-modal-dialog uk-modal-body">
                                            <h3>Add a Video</h3>

                                            <input type="hidden" name="professionalId" value="{{ user.id }}">

                                            <div class="uk-margin">
                                                <label for="edit_company_add_video_name" class="required">Name*</label>
                                                <input type="text" id="edit_company_add_video_name" name="name" required="required" class="uk-input" />
                                            </div>

                                            <div class="uk-margin">
                                                <label for="edit_company_add_video_id" class="required">Youtube Video ID*</label>
                                                <div class="uk-position-relative">
                                                    <span class="uk-form-icon" uk-icon="icon: video-camera"></span>
                                                    <input class="uk-input" id="edit_company_add_video_id" name="videoId" required="required" type="text">
                                                </div>
                                                <small>Please make sure your video is open to public.</small>

                                            </div>

                                            <div class="uk-margin">
                                                <label for="edit_company_add_video_tags" class="required">Keywords</label>
                                                <div class="uk-position-relative">
                                                    <textarea id="edit_company_add_video_tags" name="tags" class="uk-textarea"></textarea>
                                                </div>
                                            </div>

                                            <p class="uk-text-right">
                                                <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                                                <input class="uk-button uk-button-primary" type="submit" value="Save" data-action="{{ path('professional_video_add', {'id' : user.id}) }}" />
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                <div id="companyVideosTemplate" style="display: none;">
                                    <div class="company-video">
                                        <a class="uk-inline" href="https://www.youtube.com/watch?v=VIDEO_ID">
                                            <img src="http://i.ytimg.com/vi/VIDEO_ID/hqdefault.jpg" alt="">
                                            <div class="company-video__overlay">
                                                <div class="company-video__overlay-title">
                                                    VIDEO_NAME
                                                </div>
                                            </div>
                                        </a>
                                        <a onclick="event.stopPropagation();" style="position: absolute; top: -8px; left: 5px; z-index: 5000; border: none; color: #999;" class="uk-button uk-button-default" href="{{ path('profile_edit', {'id' : user.id }) }}?videoEdit=RESOURCE_ID" uk-icon="icon: file-edit"></a>
                                        <button type="button" data-remove="{{ path('company_video_remove', {'id' : 'RESOURCE_ID' }) }}" uk-close></button>
                                    </div>
                                </div>

                            </div>
                            <div class="uk-margin">
                                {% if user.professionalVideos|length %}
                                    <h4>Current Videos</h4>
                                {% endif %}
                                <div id="companyVideos" class="uk-child-width-1-3@m" uk-grid="masonry: true" uk-lightbox="animation: slide; video-autoplay: 1">
                                    {% if user.professionalVideos|length %}
                                        {% for video in user.professionalVideos %}
                                            <div class="company-video">
                                                <a class="uk-inline" href="https://www.youtube.com/watch?v={{ video.videoId|trim }}">
                                                    <img src="http://i.ytimg.com/vi/{{ video.videoId|trim }}/hqdefault.jpg" alt="">
                                                    <div class="company-video__overlay">
                                                        <div class="company-video__overlay-title">
                                                            {{ video.name }}
                                                        </div>
                                                    </div>
                                                </a>

                                                <a onclick="event.stopPropagation();" style="position: absolute; top: -8px; left: 5px; z-index: 5000; border: none; color: #999;" class="uk-button uk-button-default" href="{{ path('profile_edit', {'id' : user.id }) }}?videoEdit={{ video.id }}" uk-icon="icon: file-edit"></a>

                                                <button type="button" data-remove="{{ path('professional_video_remove', {'id' : video.id }) }}" uk-close></button>
                                            </div>

                                        {% endfor %}
                                    {% endif %}
                                </div>
                            </div>

                            {% if professionalVideo %}

                                <div id="modal-edit-professional-video" uk-modal>
                                    <div class="uk-modal-dialog uk-modal-body">
                                        <h3>Edit Video</h3>

                                        <input type="hidden" name="professionalId" value="{{ user.id }}">

                                        <div class="uk-margin">
                                            <label for="edit_company_edit_video_name" class="required">Name*</label>
                                            <input type="text" id="edit_company_edit_video_name" name="name" required="required" class="uk-input" value="{{ professionalVideo.name }}"/>
                                        </div>

                                        <div class="uk-margin">
                                            <label for="edit_company_edit_video_id" class="required">Youtube Video ID*</label>
                                            <div class="uk-position-relative">
                                                <span class="uk-form-icon" uk-icon="icon: video-camera"></span>
                                                <input class="uk-input" id="edit_company_edit_video_id" name="videoId" required="required" type="text" value="{{ professionalVideo.videoId }}">
                                            </div>
                                            <small>Please make sure your video is open to public.</small>

                                        </div>

                                        <div class="uk-margin">
                                            <label for="edit_company_edit_video_tags" class="required">Keywords</label>
                                            <div class="uk-position-relative">
                                                <textarea id="edit_company_edit_video_tags" name="tags" class="uk-textarea">{{ professionalVideo.tags }}</textarea>
                                            </div>
                                        </div>

                                        <p class="uk-text-right">
                                            <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>
                                            <input class="uk-button uk-button-primary" type="submit" value="Save" data-action="{{ path('professional_video_edit', {id: professionalVideo.id}) }}" />
                                        </p>
                                    </div>
                                </div>


                            {% endif %}

                            <div class="uk-margin">
                                <button type="button" class="uk-button uk-button-primary uk-button-small js-navigate" data-navigate-to-index="5">Next</button>
                            </div>


                        </div>


                        <div class="account_details_account">
                            <div class="uk-width-xlarge">
                                <fieldset class="uk-fieldset">
                                    <div class="uk-margin">
                                        {{ form_label(form.email, 'Email') }}
                                        {{ form_widget(form.email, {'attr': {'class': 'uk-input' ~ ( form_errors(form.email) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.email) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.plainPassword, 'Change Password') }}
                                        {{ form_widget(form.plainPassword, {'attr': {'class': 'uk-input' ~ ( form_errors(form.plainPassword) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.plainPassword) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.linkedinProfile, 'Linked In Profile') }}
                                        {{ form_widget(form.linkedinProfile, {'attr': {'class': 'uk-input' ~ ( form_errors(form.linkedinProfile) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.linkedinProfile) }}
                                    </div>
                                    <div class="uk-margin">
                                        <div class="uk-column-1-2">
                                            <div>
                                                {{ form_label(form.phone, 'Phone') }}
                                                {{ form_widget(form.phone, {'attr': {'class': 'uk-input' ~ ( form_errors(form.phone) ? ' uk-form-danger' : '' ) }}) }}
                                                {{ form_errors(form.phone) }}
                                            </div>
                                            <div>
                                                {{ form_label(form.phoneExt, 'Ext.') }}
                                                {{ form_widget(form.phoneExt, {'attr': {'class': 'uk-input' ~ ( form_errors(form.phoneExt) ? ' uk-form-danger' : '' ) }}) }}
                                                {{ form_errors(form.phoneExt) }}
                                            </div>
                                        </div>
                                    </div>
                                    <div class="uk-margin">
                                        <h4 class="uk-heading-divider">Contact Preferences</h4>
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.isEmailHiddenFromProfile, 'Hide Email From Profile?') }}
                                        {{ form_widget(form.isEmailHiddenFromProfile, {'attr': {'class': 'uk-input' ~ ( form_errors(form.isEmailHiddenFromProfile) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.isEmailHiddenFromProfile) }}
                                    </div>
                                    <div class="uk-margin">
                                        {{ form_label(form.isPhoneHiddenFromProfile, 'Hide Phone From Profile?') }}
                                        {{ form_widget(form.isPhoneHiddenFromProfile, {'attr': {'class': 'uk-input' ~ ( form_errors(form.isPhoneHiddenFromProfile) ? ' uk-form-danger' : '' ) }}) }}
                                        {{ form_errors(form.isPhoneHiddenFromProfile) }}
                                    </div>
                                    <div class="uk-margin">
                                        <button class="uk-button uk-button-primary uk-button-small" id="submit-form">Save</button>
                                    </div>
                                </fieldset>
                            </div>
                        </div>
                    </ul>
                </div>
            </div>
            <input type="hidden" name="guestInstructor" id="guest_instructor" value="0" />
            <input type="hidden" name="formType" value="professionalRegistrationForm">

            {{ form_end(form) }}

        </div>
        {% include 'profile/partials/shared/_settings_and_delete_content.html.twig' %}
    </div>
</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $( document ).ready(function() {

        $('.js-navigate').click(function(e) {
            let indexToNavigateTo = $(e.target).attr('data-navigate-to-index');

            UIkit.tab('#test').show(indexToNavigateTo);
        })

        $('#submit-form').on('click', function(e){
            var myForm = $(this).parents('form');
            $('input[name="professional_edit_profile_form[rolesWillingToFulfill][]"]:checked').each(function(){
                if( $(this).val() == 1){
                    e.preventDefault();
                    swal('You chose guest instructor as a role. Would you like to add lessons you can teach?', {
                       buttons: {
                           cancel: "Not at this time",
                           success: "Yes I would"
                       } 
                    })
                    .then((value) => {
                        switch(value) {
                            case "success":
                                $("#guest_instructor").val(1);
                                myForm.submit();
                                break;
                            
                            default:
                                myForm.submit();
                                break;
                        }
                    });
                }
            });
        });

    });
</script>

{% if professionalVideo %}
    <script>
        window.onload = function() {
            debugger;
            UIkit.modal('#modal-edit-professional-video').show()
        };
    </script>
{% endif %}