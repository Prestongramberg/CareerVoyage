{% extends 'baseAuthenticatedReportDashboard.html.twig' %}

{% block title %}Experience Satisfaction Report{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('build/report_dashboard.js') }}"></script>
{% endblock %}

 {% block stylesheets %}
     {{ parent() }}
     <link rel="stylesheet" href="{{ asset('build/report_dashboard.css') }}"/>
 {% endblock %}


{% block navTitle %}Data Analysis{% endblock %}

 {% block filters %}

     <div>
         <button style="position: relative; width: 200px" class="uk-button uk-button-primary" type="button"
                 uk-toggle="target: #dashboard-filters; animation: uk-animation-slide-left, uk-animation-slide-bottom">
             Filters <span style="position: absolute; top: 50%; transform: translateY(-50%); right: 20px"
                           uk-icon="cog"></span></button>
         <br>
         <div id="dashboard-filters" {{ showFilters ? '' : 'hidden' }}>
             <br>
             {{ form_start(form, {'attr': {'class': 'uk-grid-small', 'uk-grid': 'uk-grid'}}) }}

             {% if form.feedbackProvider is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.feedbackProvider, 'Feedback Provider', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.feedbackProvider, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.experienceProvider is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.experienceProvider, 'Experience Provider', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.experienceProvider, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.experienceTypeName is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.experienceTypeName, 'Experience Type', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.experienceTypeName, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.regionNames is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.regionNames, 'Region', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.regionNames, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.schoolNames is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.schoolNames, 'School', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.schoolNames, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.companyNames is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.companyNames, 'Company', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.companyNames, {'attr': {'class': 'uk-select'}}) }}
                 </div>
             {% endif %}

             {% if form.eventStartDate is defined %}
                 <div class="uk-width-1-4">
                     {{ form_label(form.eventStartDate, 'Time Period', {'attr': {'class': 'uk-text-bold'}}) }}
                     {{ form_widget(form.eventStartDate.left_date, {'attr': {'class': 'uk-datepicker uk-input'}}) }}
                 </div>

                 <div class="uk-width-1-4">
                     <label style="visibility: hidden">Time Period</label>
                     {{ form_widget(form.eventStartDate.right_date, {'attr': {'class': 'uk-datepicker uk-input'}}) }}
                 </div>
             {% endif %}

             <br>
             <div class="uk-width-1-1" style="float:right">
                 <br>
                 <button class="uk-button uk-button-primary" style="float:right">Search</button>
                 <a class="uk-button uk-button-danger uk-align-right" style="float:right" href="{{ clearFormUrl }}">Clear</a>
             </div>
             {{ form_end(form) }}
         </div>
     </div>
     <br>
 {% endblock %}



 {% block charts %}

     <div uk-grid class="uk-child-width-1-1@s uk-child-width-1-2@l">
         <div>
             <div class="uk-card uk-card-default">
                 <div class="uk-card-header">
                     {{ barChart.header }} <br>
                     <small>{{ barChart.subHeader }}</small>
                 </div>
                 <div class="uk-card-body">

                     {# TODO You can add these to a controller that symfony can render asyncronously. Come back and do this before the demo. #}

                     <div data-chart="{{ barChart.render }}" class="chartjs-wrapper">
                         <canvas id="myChart" class="chartjs"></canvas>
                     </div>

                 </div>
                 <div class="uk-card-footer" style="text-align: center">
                     {{ barChart.footer }}
                 </div>
             </div>
         </div>
         <div>
             <div class="uk-card uk-card-default">
                 <div class="uk-card-header">
                     Website Traffic
                 </div>
                 <div class="uk-card-body">
                     <canvas id="chart2"></canvas>
                 </div>
             </div>
         </div>
     </div>

 {% endblock %}


