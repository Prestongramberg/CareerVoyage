{% extends 'baseAuthenticated.html.twig' %}

{% block title %}View School{% endblock %}
{% block bodyClass %}page-school-view{% endblock %}

{% block body %}

    <div class="page-school-view__featured-image uk-height-medium uk-flex uk-flex-right uk-flex-bottom uk-background-cover uk-light"
         data-src="{{ school.featuredImageURL }}" uk-img>

        <div class="uk-width-1-1" style="background: rgba(0,0,0,0.6)">
            <div class="uk-container">
                <div class="uk-padding-small">
                    <div class="uk-grid-small uk-flex-middle" uk-grid>
                        <div class="uk-width-expand">
                            <h3>{{ school.name }}</h3>
                        </div>
                        <div class="uk-width-auto">
                            <div class="uk-align-right">
                                <div class="react-favorite-school uk-inline" data-school-id="{{ school.id }}"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>



    <div class="uk-container">

        {% include 'flash/messages.html.twig' %}

        <div class="uk-margin">
            <ul class="uk-breadcrumb">
                <li><a href="/">Dashboard</a></li>
                <li><a href="{{ path('school_index') }}">Schools</a></li>
                <li><span>{{ school.name }}</span></li>
            </ul>
        </div>

        <div class="uk-grid-small uk-flex-middle uk-margin" uk-grid>
            <div class="uk-width-expand">
                <div class="uk-align-right@l">
                    {% if school.canCreateExperiences(user) %}
                        <a href="{{ path('school_experience_create', {id: school.id}) }}" class="uk-button uk-button-default uk-button-small">Create Event</a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        
        <ul data-uk-tab="{connect: '#tab-school-detail'}" uk-switcher>
            <li class="uk-active"><a href="#school-summary">Summary</a></li>
            {% if school.schoolPhotos|length %}
                <li><a href="#school-photos">Photos</a></li>
            {% endif %}
            {% if school.schoolVideos|length %}
                <li><a href="#school-videos">Videos</a></li>
            {% endif %}
            {% if school.schoolExperiences|length %}
                <li><a href="#school-events">Events</a></li>
            {% endif %}
            {% if school.schoolResources|length %}
                <li><a href="#school-events">Resources</a></li>
            {% endif %}
            {% if school.educatorUsers|length %}
                <li><a href="#school-educators">Educators</a></li>
            {% endif %}
        </ul>

        <div class="uk-switcher" id="tab-school-detail">
            <div class="school__summary">
                <div class="uk-width-xlarge">
                    <div class="uk-margin">
                        {{ school.overviewAndBackground|raw }}
                    </div>
                    <div class="school-links uk-margin">
                        {% if school.email %}
                            <a href="mailto:{{ school.email }}" target="_blank" class="uk-icon-button uk-margin-small-right" uk-icon="mail"></a>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% if school.schoolPhotos|length %}
                <div class="school__photos">
                    <div class="uk-grid uk-child-width-1-6@l uk-child-width-1-4@m uk-child-width-1-3" uk-grid="masonry: true" uk-lightbox="animation: slide">
                        {% for schoolPhoto in school.schoolPhotos %}
                            <div>
                                <a class="uk-inline" href="{{ asset(uploaded_asset(schoolPhoto.path)) }}">
                                    <img src="{{ asset(uploaded_asset(schoolPhoto.path))|imagine_filter('squared_thumbnail_small') }}" />
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if school.schoolVideos|length %}
                <div class="school__videos">
                    <div class="uk-child-width-1-3@m" uk-grid="masonry: true" uk-lightbox="animation: slide; video-autoplay: 1">
                        {% for video in school.schoolVideos %}
                            <div>
                                <a class="uk-inline" href="https://www.youtube.com/watch?v={{ video.videoId }}">
                                    <img src="http://i.ytimg.com/vi/{{ video.videoId }}/hqdefault.jpg" alt="">
                                </a>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if school.schoolExperiences|length %}
                <div class="school__events">
                    <div class="uk-grid event-listing uk-child-width-1-2@m" uk-grid="masonry: true">
                        {% for experience in school.schoolExperiences %}
                            <div>
                                <div class="uk-card uk-card-default uk-card-body">
                                    <div class="uk-card-badge uk-label">{{ experience.type }}</div>
                                    <div class="uk-text-meta">{{ experience.startDateAndTime|date("F jS, Y") }}</div>
                                    <div class="uk-margin">
                                        <a href="{{ path('school_experience_view', {'id': experience.id}) }}"><h3 class="uk-card-title">{{ experience.title }}</h3></a>
                                        <p>{{ experience.briefDescription }}</p>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endif %}
            {% if school.schoolResources|length %}
                <div class="school__resources">
                    <dl class="uk-description-list uk-description-list-divider">
                        {% for schoolResource in school.schoolResources %}
                            <div class="uk-grid uk-flex-middle" uk-grid>
                                <div class="uk-width-expand">
                                    <dt>{{ schoolResource.title }}</dt>
                                    <dd>{{ schoolResource.description }}</dd>
                                </div>
                                <div class="uk-width-auto">
                                    <a href="{{ asset(uploaded_asset(schoolResource.path)) }}" class="uk-button uk-button-default uk-button-small" target="_blank">View</a>
                                </div>
                            </div>
                        {% endfor %}
                    </dl>
                </div>
            {% endif %}
            {% if school.educatorUsers|length %}
                <div class="school__educators">
                    <dl class="uk-description-list uk-description-list-divider">
                        {% for educatorUser in school.educatorUsers %}
                            <div class="uk-grid uk-flex-middle" uk-grid>
                                <div class="uk-width-auto">
                                    <img class="uk-border-circle" width="40" height="40" src="{{ ( attribute(educatorUser, 'photo') is defined and educatorUser.photo ) ? asset(uploaded_asset(educatorUser.photoPath))|imagine_filter('squared_thumbnail_small') : asset('build/images/avatar.png') }}">
                                </div>
                                <div class="uk-width-expand">
                                    <dt>{{ educatorUser.firstName }} {{ educatorUser.lastName }}</dt>
                                </div>
                                <div class="uk-width-auto">
                                    <a href="{{ path('profile_index', { "id": educatorUser.id }) }}" class="uk-button uk-button-default uk-button-small">View</a>
                                </div>
                            </div>
                        {% endfor %}
                    </dl>
                </div>
            {% endif %}
        </div>
    </div>



{% endblock %}
